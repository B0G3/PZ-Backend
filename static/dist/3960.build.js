(self.webpackChunkpz_frontend=self.webpackChunkpz_frontend||[]).push([[3960],{33686:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var a=n(6610),r=n(5991),s=n(65255),i=n(53724),o=n(77608),l=n(99578),c=n(30507);var u=function(t){(0,s.Z)(u,t);var e,n,l=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,o.Z)(e);if(n){var r=(0,o.Z)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,i.Z)(this,t)});function u(){return(0,a.Z)(this,u),l.apply(this,arguments)}return(0,r.Z)(u,[{key:"baseURL",value:function(){return c.API_URL}},{key:"request",value:function(t){return this.$http.request(t)}}]),u}(l.H)},21491:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var a=n(23645),r=n.n(a)()((function(t){return t[1]}));r.push([t.id,"\n.fixIndex[data-v-478cf90e] {\n\tz-index: 9999;\n}\n.v-application:not(.theme--dark) .bg[data-v-478cf90e] {\n\tbackground-color: #f3f3f3 !important;\n}\n.v-application.theme--dark .bg[data-v-478cf90e] {\n\tbackground-color: #121212 !important;\n}\n",""]);const s=r},12176:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var a=n(23645),r=n.n(a)()((function(t){return t[1]}));r.push([t.id,"\n.fixIndex[data-v-e8a1ad96] {\n\tz-index: 9999;\n}\n.v-application:not(.theme--dark) .bg[data-v-e8a1ad96] {\n\tbackground-color: #f3f3f3 !important;\n}\n.v-application.theme--dark .bg[data-v-e8a1ad96] {\n\tbackground-color: #121212 !important;\n}\n.cS-item .v-card__text[data-v-e8a1ad96] {\n\tfont-size: 18px;\n\tcolor: #505050;\n}\n.v-application.theme--dark .cS-item .v-card__text[data-v-e8a1ad96] {\n\tcolor: #d6d6d6;\n}\n.cS-item i[data-v-e8a1ad96] {\n\tfont-size: 33px;\n\tfloat: right;\n\tmargin-right: 16px;\n}\n.v-application.theme--dark .cS-item i[data-v-e8a1ad96] {\n\tcolor: #0000006b;\n}\n.cS-item p[data-v-e8a1ad96] {\n\tdisplay: initial;\n\tmargin-bottom: 0;\n}\n.searchUser-list[data-v-e8a1ad96] {\n\tbackground: none;\n}\n",""]);const s=r},54726:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a={name:"UiInputTextValidation",props:{rules:{type:String,default:""},value:{type:null},disabled:{type:Boolean,default:!1},type:{type:String,default:"text",validator:function(t){return-1!==["url","text","password","email","search"].indexOf(t)}}},data:function(){return{inputValue:""}},computed:{lowerCaseLabel:function(){return this.$attrs.label?this.$attrs.label.toLowerCase().trim():""},vPName:function(){return this.$attrs.vPName?this.$attrs.vPName:this.lowerCaseLabel}},watch:{inputValue:function(t){this.$emit("input",t)},value:function(t){this.inputValue=t}},created:function(){this.value&&(this.inputValue=this.value)}},r=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ValidationProvider",{attrs:{name:t.vPName,rules:t.rules},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[n("v-text-field",{attrs:{label:t.$attrs.label,"error-messages":a,disabled:t.disabled,type:t.type},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})]}}])})}),[],!1,null,null,null).exports},28154:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});const a={name:"FCardModal",props:{value:{type:null},closeButton:{type:Boolean,default:!0}},data:function(){return{showModal:!1}},watch:{showModal:function(t){this.$emit("input",t)},value:function(t){this.showModal=t}},created:function(){this.value&&(this.showModal=this.value)},methods:{close:function(){this.showModal=!1,this.$emit("onclose",!0)}}};var r,s=n(93379),i=n.n(s),o=n(15054),l=n.n(o),c=0,u={injectType:"lazyStyleTag",insert:"head",singleton:!1},d={};d.locals=l().locals||{},d.use=function(){return c++||(r=i()(l(),u)),d},d.unuse=function(){c>0&&!--c&&(r(),r=null)};const f=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{staticClass:"fixIndex",attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("v-card",{staticClass:"bg"},[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[t.closeButton?n("v-btn",{attrs:{icon:"",dark:""},on:{click:t.close}},[n("v-icon",[t._v("fa-close")])],1):t._e(),t._v(" "),n("v-toolbar-title",[t._t("header")],2),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",[t.closeButton?n("v-btn",{attrs:{dark:"",text:""},on:{click:t.close}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("buttons.actions.close"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t._t("actions")],2)],1),t._v(" "),n("v-container",{attrs:{"fill-height":"",fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12",sm:"10"}},[n("v-card",{staticClass:"mx-auto mt-6"},[n("v-card-text",[n("h2",{staticClass:"text--primary text-center"},[t._t("card-title")],2),t._v(" "),t._t("card-text")],2),t._v(" "),n("v-card-text",[t._t("body")],2)],1),t._v(" "),t._t("footer")],2)],1)],1)],1)],1)}),[],!1,null,"478cf90e",null).exports},43960:(t,e,n)=>{"use strict";n.d(e,{Z:()=>$});var a=n(92137),r=n(87757),s=n.n(r),i=n(54726),o=n(94161),l=n(28154),c=n(6610),u=n(5991),d=n(65255),f=n(53724),h=n(77608);var v=function(t){(0,d.Z)(r,t);var e,n,a=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,h.Z)(e);if(n){var r=(0,h.Z)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,f.Z)(this,t)});function r(){return(0,c.Z)(this,r),a.apply(this,arguments)}return(0,u.Z)(r,[{key:"resource",value:function(){return"search_user"}}]),r}(n(33686).Z);const p={name:"SearchUserDialog",props:{value:{type:null}},components:{UiInputTextValidation:i.Z,UserAvatar:o.Z,FCardModal:l.Z},data:function(){return{showModal:!1,awaitingSearch:!1,name:"",minLength:3,timer:null,selected:null,selectedUser:null,data:[]}},watch:{name:function(t){var e=this;this.awaitingSearch=!0,e.delay((function(){e.awaitingSearch=!1,e.lengthAccepted&&e.search()}),2e3)},selected:function(t){this.selectedUser=this.data[t]},showModal:function(t){this.$emit("input",t)},value:function(t){this.showModal=t}},computed:{lengthAccepted:function(){return this.name.length>=this.minLength},showAlert:function(){return(this.awaitingSearch||!this.lengthAccepted||0==this.data.length)&&!this.loading}},created:function(){this.value&&(this.showModal=this.value)},methods:{delay:function(t,e){this.clearTimeout(),this.timer=setTimeout(t,e)},clearTimeout:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){clearTimeout(this.timer),this.timer=null})),openDialog:function(){this.showModal=!0},closeDialog:function(){this.showModal=!1,this.data=[],this.selected=null,this.name="",this.$refs["nus-observer"].reset();var t=this;this.$nextTick((function(){t.clearTimeout(),t.awaitingSearch=!1})),this.$emit("onclose",!0)},search:function(){var t=arguments,e=this;return(0,a.Z)(s().mark((function n(){var a,r,i,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:null,r=e,e.loading=!0,n.prev=3,a&&a(),i=new v({name_like:r.name}),n.next=8,i.save();case 8:"No matching names"==(o=n.sent).msg&&(o=[]),o&&(r.data=o),r.loading=!1,n.next=17;break;case 14:n.prev=14,n.t0=n.catch(3),r.$toast.error(r.$t("searchUser.error"),r.$t("notifications.error"));case 17:case"end":return n.stop()}}),n,null,[[3,14]])})))()},create:function(){this.$emit("selected",this.selectedUser),this.closeDialog()}},beforeDestroy:function(){this.clearTimeout()}};var m,_=n(93379),g=n.n(_),y=n(87588),x=n.n(y),b=0,w={injectType:"lazyStyleTag",insert:"head",singleton:!1},k={};k.locals=x().locals||{},k.use=function(){return b++||(m=g()(x(),w)),k},k.unuse=function(){b>0&&!--b&&(m(),m=null)};const $=(0,n(51900).Z)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ValidationObserver",{ref:"nus-observer",scopedSlots:t._u([{key:"default",fn:function(e){return e.handleSubmit,e.reset,[n("FCardModal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._t("header")]},proxy:!0},{key:"actions",fn:function(){return[null!=t.selected?n("v-btn",{attrs:{dark:"",text:""},on:{click:t.create}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("buttons.actions.create"))+"\n\t\t\t\t")]):t._e()]},proxy:!0},{key:"card-title",fn:function(){return[t._v(t._s(t.$t("searchUser.title")))]},proxy:!0},{key:"body",fn:function(){return[n("form",[n("v-card",{staticClass:"mb-5 elevation-0"},[n("v-container",[n("v-row",[n("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[n("UiInputTextValidation",{attrs:{rules:"required|min:3|max:70",label:t.$t("forms.fields.user.fullName")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1)],1)],1)],1),t._v(" "),t.showAlert?n("v-alert",{staticClass:"text-center",attrs:{icon:!1,type:"warning"}},[t.awaitingSearch?[t._v("\n\t\t\t\t\t\t\t"+t._s(t.$t("forms.info.awaitingSearch"))+"\n\t\t\t\t\t\t")]:t.lengthAccepted?0==t.data.length?[t._v("\n\t\t\t\t\t\t\t"+t._s(t.$t("data.noResults"))+"\n\t\t\t\t\t\t")]:t._e():[t._v("\n\t\t\t\t\t\t\t"+t._s(t.$t("forms.info.minLength"))+" "+t._s(t.minLength)+"\n\t\t\t\t\t\t")]],2):t._e()]},proxy:!0},{key:"footer",fn:function(){return[t.showAlert||t.loading?t._e():[n("v-list",{staticClass:"mb-16 searchUser-list",attrs:{"two-line":""}},[n("v-list-item-group",{attrs:{"active-class":"active-cl"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._l(t.data,(function(e,a){return[n("v-list-item",{key:"searchUser-"+a,staticClass:"cS-item mx-auto mt-6 v-card v-sheet"},[n("div",{staticClass:"v-card__text"},[n("v-container",{attrs:{"fill-height":"",fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"6"}},[n("UserAvatar",{staticClass:"mr-4",attrs:{firstname:e.firstname,surname:e.surname}}),t._v(" "),n("p",[t._v(t._s(e.firstname)+" "+t._s(e.surname))])],1),t._v(" "),n("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"6"}},[0==e.sex?n("v-icon",[t._v("fa-female")]):t._e(),t._v(" "),1==e.sex?n("v-icon",[t._v("fa-male")]):t._e()],1)],1)],1)],1)]),t._v(" "),a<t.data.length-1?n("v-divider"):t._e()]}))],2)],1)]]},proxy:!0}],null,!0),model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}})]}}])})],1)}),[],!1,null,"e8a1ad96",null).exports},15054:(t,e,n)=>{var a=n(21491);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,n(45346).Z)("c764a8c4",a,!0,{})},87588:(t,e,n)=>{var a=n(12176);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,n(45346).Z)("43f8cafa",a,!0,{})}}]);