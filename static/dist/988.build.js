(self.webpackChunkpz_frontend=self.webpackChunkpz_frontend||[]).push([[988],{33686:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var a=n(6610),i=n(5991),l=n(65255),r=n(53724),s=n(77608),o=n(99578),u=n(30507);var c=function(t){(0,l.Z)(c,t);var e,n,o=(e=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.Z)(e);if(n){var i=(0,s.Z)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,r.Z)(this,t)});function c(){return(0,a.Z)(this,c),o.apply(this,arguments)}return(0,i.Z)(c,[{key:"baseURL",value:function(){return u.API_URL}},{key:"request",value:function(t){return this.$http.request(t)}}]),c}(o.H)},46555:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var a=n(23645),i=n.n(a)()((function(t){return t[1]}));i.push([t.id,"\n.card-album .v-btn[data-v-0ebd2ce0] {\n\tcolor: #3c3c3c;\n\twidth: 100%;\n\tbackground-color: #ffffff;\n}\n.card-album .v-btn[data-v-0ebd2ce0]:not(:only-child) {\n\twidth: 49%;\n}\n.v-application.theme--dark .card-album .v-btn[data-v-0ebd2ce0] {\n\tbackground-color: var(--v-primary-base);\n\tborder-color: var(--v-primary-base);\n\tcolor: white;\n}\n.card-album .overline[data-v-0ebd2ce0] {\n\tcolor: #949494;\n}\n.card-album.v-card[data-v-0ebd2ce0] {\n\tborder-left: 4px solid #512377;\n}\n.v-card .v-avatar[data-v-0ebd2ce0] {\n\theight: 50px !important;\n\twidth: 50px !important;\n\tfont-size: 18px;\n\tborder-radius: 0px 0px 0px 25px !important;\n\tmargin: 0px -16px 0px 0px;\n\tcolor: white;\n}\n",""]);const l=i},54726:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const a={name:"UiInputTextValidation",props:{rules:{type:String,default:""},value:{type:null},disabled:{type:Boolean,default:!1},type:{type:String,default:"text",validator:function(t){return-1!==["url","text","password","email","search"].indexOf(t)}}},data:function(){return{inputValue:""}},computed:{lowerCaseLabel:function(){return this.$attrs.label?this.$attrs.label.toLowerCase().trim():""},vPName:function(){return this.$attrs.vPName?this.$attrs.vPName:this.lowerCaseLabel}},watch:{inputValue:function(t){this.$emit("input",t)},value:function(t){this.inputValue=t}},created:function(){this.value&&(this.inputValue=this.value)}},i=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ValidationProvider",{attrs:{name:t.vPName,rules:t.rules},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[n("v-text-field",{attrs:{label:t.$attrs.label,"error-messages":a,disabled:t.disabled,type:t.type},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})]}}])})}),[],!1,null,null,null).exports},61113:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a=(0,n(51900).Z)({name:"ConfirmModal",props:{value:{type:null}},data:function(){return{showModal:""}},watch:{showModal:function(t){this.$emit("input",t)},value:function(t){this.showModal=t}},created:function(){this.value&&(this.showModal=this.value)},methods:{close:function(){this.showModal=!1,this.$emit("onclose",!0)}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._t("header")],2),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(t._s(t.$t("buttons.actions.close")))]),t._v(" "),t._t("actions"),t._v(" "),n("v-spacer")],2)],1)],1)],1)}),[],!1,null,null,null).exports},58958:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a=(0,n(51900).Z)({name:"FormModal",props:{value:{type:null}},data:function(){return{showModal:""}},watch:{showModal:function(t){this.$emit("input",t)},value:function(t){this.showModal=t}},created:function(){this.value&&(this.showModal=this.value)},methods:{close:function(){this.showModal=!1,this.$emit("onclose",!0)}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._t("header")],2),t._v(" "),n("v-card-text",[n("form",[n("v-card",{staticClass:"mb-5 elevation-0"},[n("v-container",[n("v-row",[t._t("body")],2)],1)],1)],1)]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(t._s(t.$t("buttons.actions.close")))]),t._v(" "),t._t("actions"),t._v(" "),n("v-spacer")],2)],1)],1)}),[],!1,null,null,null).exports},22561:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const a={name:"UIPagination",props:{length:{type:Number,default:15},totalVisible:{type:Number,default:7},value:{type:null}},data:function(){return{currentPage:1}},watch:{currentPage:function(t){this.$emit("input",t)},value:function(t){this.currentPage=t}},created:function(){this.value&&(this.currentPage=this.value)}},i=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("v-pagination",{attrs:{length:t.length,"total-visible":t.totalVisible},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)}),[],!1,null,null,null).exports},90988:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>Z});var a=n(92137),i=n(87757),l=n.n(i),r=n(54726),s=n(22561);const o={name:"UiDatePicker",props:{value:{type:null},disabled:{type:Boolean,default:!1},label:{type:String,default:"text"}},data:function(){return{inputValue:(new Date).toISOString().substr(0,10),menu:!1}},watch:{inputValue:function(t){this.$emit("input",t)},value:function(t){this.inputValue=t}},created:function(){this.value&&(this.inputValue=this.value)}};var u=n(51900);const c=(0,u.Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.inputValue,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.inputValue=e},"update:return-value":function(e){t.inputValue=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{label:t.label,readonly:""},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("\n\t\t\t"+t._s(t.$t("buttons.actions.cancel"))+"\n\t\t")]),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.inputValue)}}},[t._v("\n\t\t\t"+t._s(t.$t("buttons.actions.ok"))+"\n\t\t")])],1)],1)}),[],!1,null,null,null).exports;var d=n(61113),f=n(58958),v=n(6610),m=n(5991),p=n(65255),h=n(53724),b=n(77608);var g=function(t){(0,p.Z)(i,t);var e,n,a=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,b.Z)(e);if(n){var i=(0,b.Z)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,h.Z)(this,t)});function i(){return(0,v.Z)(this,i),a.apply(this,arguments)}return(0,m.Z)(i,[{key:"resource",value:function(){return"album"}}]),i}(n(33686).Z);const _={ititle:"gallery.album.list.title",components:{UiInputTextValidation:r.Z,UIPagination:s.Z,UiDatePicker:c,ConfirmModal:d.Z,FormModal:f.Z},data:function(){return{pageId:1,allPages:0,dialogAdd:!1,dialogEdit:!1,dialogDelete:!1,data:[],editedIndex:-1,newItem:{id:0,name:"",date:"",description:""},editedItem:{id:0,name:"",date:"",description:""},defaultItem:{id:0,name:"",date:(new Date).toISOString().substr(0,10),description:""},loading:!1}},computed:{albumName:{get:function(){if(this.editedIndex>=0){var t=this.data[this.editedIndex];if(t)return t.name}return""},set:function(t){return t}},noData:function(){return!this.loading&&0==this.data.length}},mounted:function(){var t=this;this.$nextTick((function(){t.pageId=parseInt(t.$route.params.pageId),t.fetchAlbumsData()}))},methods:{fetchAlbumsData:function(){var t=arguments,e=this;return(0,a.Z)(l().mark((function n(){var a,i,r,s,o,u;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:null,i=e,e.loading=!0,n.prev=3,a&&a(),n.next=7,g.page(i.pageId).get();case 7:for(r=n.sent,s=r.data,i.allPages=i.getAllPagesFromLast(r.last_page),o=[],u=0;u<s.length;u++)o.push({id:s[u].id,name:s[u].name,description:s[u].description,quantity:s[u].img_count,date:i.simpleFormatDate(s[u].date)});o&&(i.data=o),a&&a(),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(3),i.$toast.error(i.$t("gallery.album.list.error"),i.$t("notifications.error"));case 19:return n.prev=19,i.loading=!1,n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[3,16,19,22]])})))()},saveAlbumData:function(t){var e=arguments,n=this;return(0,a.Z)(l().mark((function a(){var i,r,s;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:null,r=n,a.prev=2,s=new g(t),a.next=6,s.save();case 6:if("This image is already in an album"!=a.sent.msg){a.next=10;break}return r.$toast.error(r.$t("gallery.album.assign.imageExistsError"),r.$t("notifications.error")),a.abrupt("return");case 10:r.$toast.success(r.$t("gallery.album.add.success"),r.$t("notifications.success")),r.fetchAlbumsData(i),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(2),r.$toast.error(r.$t("gallery.album.add.error"),r.$t("notifications.error"));case 17:case"end":return a.stop()}}),a,null,[[2,14]])})))()},editAlbumData:function(t){var e=arguments,n=this;return(0,a.Z)(l().mark((function a(){var i,r,s;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:null,r=n,a.prev=2,s=new g(t),a.next=6,s.save();case 6:r.$toast.success(r.$t("gallery.album.edit.success"),r.$t("notifications.success")),r.fetchAlbumsData(i),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),r.$toast.error(r.$t("gallery.album.edit.error"),r.$t("notifications.error"));case 13:case"end":return a.stop()}}),a,null,[[2,10]])})))()},deleteAlbumData:function(t){var e=arguments,n=this;return(0,a.Z)(l().mark((function a(){var i,r,s;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:null,r=n,a.prev=2,s=new g({id:t}),a.next=6,s.delete();case 6:r.$toast.success(r.$t("gallery.album.delete.success"),r.$t("notifications.success")),r.fetchAlbumsData(i),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),r.$toast.error(r.$t("gallery.album.delete.error"),r.$t("notifications.error"));case 13:case"end":return a.stop()}}),a,null,[[2,10]])})))()},openAddAlbumDialog:function(){this.dialogAdd=!0,this.newItem=this._.cloneDeep(this.defaultItem),this.$refs["nus-observer"].reset()},addAlbumConfirm:function(){var t=this;this.saveAlbumData({name:this.newItem.name,date:this.newItem.date,description:this.newItem.description},(function(){t.closeAlbumAddDialog()}))},closeAlbumAddDialog:function(){this.dialogAdd=!1},openEditAlbumDialog:function(t){this.editedItem=this._.cloneDeep(this.defaultItem),this.$refs["eus-observer"].reset(),this.editedIndex=this.data.indexOf(t),this.editedItem=this._.cloneDeep(t),this.dialogEdit=!0},editAlbumConfirm:function(){this.editAlbumData({id:this.editedItem.id,name:this.newItem.name,date:this.newItem.date,description:this.newItem.description},(function(){})),this.closeAlbumEdit()},closeAlbumEditDialog:function(){this.dialogEdit=!1},openDeleteAlbumDialog:function(t){this.editedIndex=this.data.indexOf(t),this.editedItem=this._.cloneDeep(t),this.dialogDelete=!0},deleteAlbumConfirm:function(){var t=this.data[this.editedIndex];this.deleteAlbumData(t.id),this.closeAlbumDeleteDialog()},closeAlbumDeleteDialog:function(){this.dialogDelete=!1},goTo:function(t){this.$router.push({path:"/gallery/images/list/".concat(t,"/1")})}},watch:{pageId:function(t){this.fetchAlbumsData()}}};var x,y=n(93379),$=n.n(y),w=n(8996),k=n.n(w),I=0,D={injectType:"lazyStyleTag",insert:"head",singleton:!1},A={};A.locals=k().locals||{},A.use=function(){return I++||(x=$()(k(),D)),A},A.unuse=function(){I>0&&!--I&&(x(),x=null)};const Z=(0,u.Z)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("PageBar",[t.$can("save","Gallery")?n("v-btn",{staticClass:"primary",attrs:{elevation:"1",large:"",rounded:"",loading:t.loading},on:{click:t.openAddAlbumDialog}},[n("v-icon",{staticClass:"mr-3",attrs:{color:"white"}},[t._v("fas fa-plus")]),t._v("\n\t\t\t"+t._s(t.$t("gallery.album.list.addAlbum"))+"\n\t\t")],1):t._e()],1),t._v(" "),n("v-container",{attrs:{fluid:""}},[n("v-row",[t.noData?[n("v-col",{attrs:{cols:"12"}},[n("v-alert",{attrs:{color:"blue",dark:"",border:"left",icon:"fa-info-circle",transition:"scale-transition"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("data.noData"))+"\n\t\t\t\t\t")])],1)]:t._l(t.data,(function(e,a){return n("v-col",{key:e.id,attrs:{cols:"12",sm:"6",md:"4",lg:"4",xl:"3"}},[n("v-card",{staticClass:"mx-auto card-album elevation-1",attrs:{outlined:""}},[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("div",{staticClass:"overline mb-4"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.date)+"\n\t\t\t\t\t\t\t\t")]),t._v(" "),n("v-list-item-title",{staticClass:"headline mb-1"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t")])],1),t._v(" "),n("v-list-item-avatar",{staticClass:"elevation-1",attrs:{tile:"",color:"primary"}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.quantity)+"\n\t\t\t\t\t\t\t")])],1),t._v(" "),n("v-card-actions",[t.$can("read","Gallery")?n("v-btn",{attrs:{outlined:"",text:""},on:{click:function(n){return t.goTo(e.id)}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$t("gallery.album.list.openAlbum"))+"\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),t.$can("delete","Gallery")?n("v-btn",{attrs:{outlined:"",text:"",color:"red",disabled:t.loading},on:{click:function(n){return t.openDeleteAlbumDialog(e)}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$t("buttons.actions.remove"))+"\n\t\t\t\t\t\t\t")]):t._e()],1)],1)],1)}))],2)],1),t._v(" "),n("UIPagination",{staticClass:"mt-4",attrs:{length:t.allPages},model:{value:t.pageId,callback:function(e){t.pageId=e},expression:"pageId"}}),t._v(" "),n("ValidationObserver",{ref:"nus-observer",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit;return e.reset,[n("FormModal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("gallery.album.add.title")))]},proxy:!0},{key:"body",fn:function(){return[n("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[n("UiInputTextValidation",{attrs:{rules:"required|min:3|max:45",label:t.$t("forms.fields.album.name")},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name",e)},expression:"newItem.name"}})],1),t._v(" "),n("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[n("UiDatePicker",{attrs:{label:t.$t("forms.fields.album.date")},model:{value:t.newItem.date,callback:function(e){t.$set(t.newItem,"date",e)},expression:"newItem.date"}})],1),t._v(" "),n("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[n("UiInputTextValidation",{attrs:{rules:"required|min:3|max:128",label:t.$t("forms.fields.album.description")},model:{value:t.newItem.description,callback:function(e){t.$set(t.newItem,"description",e)},expression:"newItem.description"}})],1)]},proxy:!0},{key:"actions",fn:function(){return[n("v-btn",{attrs:{color:"blue darken-1",text:"",type:"submit"},on:{click:function(e){return a(t.addAlbumConfirm)}}},[t._v(t._s(t.$t("buttons.actions.add")))])]},proxy:!0}],null,!0),model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}})]}}])}),t._v(" "),n("ConfirmModal",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("gallery.album.delete.confTitle"))+" "+t._s(t.albumName)+"?")]},proxy:!0},{key:"actions",fn:function(){return[n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteAlbumConfirm}},[t._v(t._s(t.$t("buttons.actions.accept")))])]},proxy:!0}]),model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}})],1)}),[],!1,null,"0ebd2ce0",null).exports},8996:(t,e,n)=>{var a=n(46555);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals),(0,n(45346).Z)("6bb5809c",a,!0,{})}}]);